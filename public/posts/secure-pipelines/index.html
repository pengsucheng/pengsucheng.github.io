<!DOCTYPE html>





<html lang="en-us" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="theme-name" content="Anubis2">

<title>A Practical Guide to Integrating Security into Your Jenkins Pipeline - Random bits</title>

<meta name="description" content="In modern software development, &ldquo;shifting left&rdquo; is more than just a buzzword; it&rsquo;s a crucial practice for building secure and reliable applications. By integrating security testing early and often in the development lifecycle, we can catch vulnerabilities before they reach production.
This guide will walk you through the practical steps of transforming a standard CI/CD pipeline into a robust DevSecOps pipeline. We&rsquo;ll start with a basic Jenkins setup for a Python application and incrementally add multiple layers of automated security scanning:">





<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png">





<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>




    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.ad0c5f08e11beb85512119de0d31d3f47192f92c923af67f5b124616b9113cea.css" integrity="sha256-rQxfCOEb64VRIRneDTHT9HGS&#43;SySOvZ/WxJGFrkRPOo=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.c4c04b3ef88e3d619ad4c7ee5e03048422bc55c4fefdc1f07657c1133670aa22.css" integrity="sha256-xMBLPviOPWGa1MfuXgMEhCK8VcT&#43;/cHwdlfBEzZwqiI=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.21c5d8fe0a79d623b0adc1ce4bd4f6dd2c05cd939c9aaaa966ba7186b1464f4d.css" integrity="sha256-IcXY/gp51iOwrcHOS9T23SwFzZOcmqqpZrpxhrFGT00=">
    





    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.508bd813cbc27a3978d0cde578e221f3e6c83958ae6be174eaf93004b8ce8785.css" integrity="sha256-UIvYE8vCejl40M3leOIh8&#43;bIOViua&#43;F06vkwBLjOh4U=">
    

















    

    





    
    
        
    
    

    
        <script src="/js/script.min.08f04d96386c73c9bf4d160333f8f448c05a6e01c06770542ee0e013954ce930.js" type="text/javascript" charset="utf-8" integrity="sha256-CPBNljhsc8m/TRYDM/j0SMBabgHAZ3BULuDgE5VM6TA="></script>
    










    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header">
            
                <div class="header-top">
    <div class="header-top-left">
        <h1 class="site-title noselect">
    <a href="/">Random bits</a>
</h1>

        


    
        <div class="theme-switcher">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-sun-high"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg>


</span>

        </div>
    

    <script>
        const STORAGE_KEY = 'user-color-scheme'
        const defaultTheme = "light"

        let currentTheme
        let switchButton
        let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

        function switchTheme(e) {
            currentTheme = (currentTheme === 'dark') ? 'light' : 'dark';
            if (localStorage) localStorage.setItem(STORAGE_KEY, currentTheme);
            document.documentElement.setAttribute('data-theme', currentTheme);
            changeGiscusTheme(currentTheme);
            document.body.dispatchEvent(new CustomEvent(currentTheme + "-theme-set"));
        }

        const autoChangeScheme = e => {
            currentTheme = e.matches ? 'dark' : 'light'
            document.documentElement.setAttribute('data-theme', currentTheme);
            changeGiscusTheme(currentTheme);
            document.body.dispatchEvent(new CustomEvent(currentTheme + "-theme-set"));
        }

        document.addEventListener('DOMContentLoaded', function () {
            switchButton = document.querySelector('.theme-switcher')
            currentTheme = detectCurrentScheme()

            if (currentTheme === 'auto') {
                autoChangeScheme(autoDefinedScheme);
                autoDefinedScheme.addListener(autoChangeScheme);
            } else {
                document.documentElement.setAttribute('data-theme', currentTheme)
            }

            if (switchButton) {
                switchButton.addEventListener('click', switchTheme, false)
            }

            showContent();
        })

        function detectCurrentScheme() {
            if (localStorage !== null && localStorage.getItem(STORAGE_KEY)) {
                return localStorage.getItem(STORAGE_KEY)
            }
            if (defaultTheme) {
                return defaultTheme
            }
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function showContent() {
            document.body.style.visibility = 'visible';
            document.body.style.opacity = 1;
        }

        function changeGiscusTheme (theme) {
            function sendMessage(message) {
              const iframe = document.querySelector('iframe.giscus-frame');
              if (!iframe) return;
              iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
            }

            sendMessage({
              setConfig: {
                theme: theme
              }
            });
        }
    </script>


        <ul class="social-icons noselect">







    <li>
            <a href="/index.xml" title="RSS" rel="me">
            <span class="inline-svg">

    


    
    
    
    
    

    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M4 4a16 16 0 0 1 16 16" /><path d="M4 11a9 9 0 0 1 9 9" /></svg>


</span>

            </a>
        </li>
    

</ul>

    </div>
    <div class="header-top-right">

    </div>
</div>


    <nav class="noselect">
        
        
        <a class="" href="/" title="">Home</a>
        
        <a class="" href="/about/" title="">About</a>
        
        <a class="" href="/tags/" title="">Tags</a>
        
        <a class="" href="/posts/" title="">Archive</a>
        
    </nav>






            
        </header>
        <main id="main" tabindex="-1">
            
    <article class="post h-entry">
        <div class="post-header">
            <header>
                
                
                
                <h1 class="p-name post-title ">A Practical Guide to Integrating Security into Your Jenkins Pipeline</h1>
                

            </header>
            



<div class="post-info noselect">
    
        <div class="post-date dt-published">
            <time datetime="2025-08-08">2025-08-08</time>
            
        </div>
    

    <a class="post-hidden-url u-url" href="/posts/secure-pipelines/">/posts/secure-pipelines/</a>
    <a href="/" class="p-name p-author post-hidden-author h-card" rel="me">map[name:Pengsu]</a>


    <div class="post-taxonomies">
        
        
        
    </div>
</div>

        </div>
        





  
  
  
  <details class="toc noselect">
    <summary>Table of Contents</summary>
    <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#the-starting-point-a-basic-cicd-pipeline">The Starting Point: A Basic CI/CD Pipeline</a></li>
    <li><a href="#layer-1-static-analysis-sast--sca">Layer 1: Static Analysis (SAST &amp; SCA)</a>
      <ul>
        <li><a href="#sca-scanning-dependencies-with-osv-scanner">SCA: Scanning Dependencies with OSV-Scanner</a></li>
        <li><a href="#sast-scanning-code-with-bandit-and-semgrep">SAST: Scanning Code with Bandit and Semgrep</a></li>
      </ul>
    </li>
    <li><a href="#layer-2-container-image-scanning-with-trivy">Layer 2: Container Image Scanning with Trivy</a></li>
    <li><a href="#layer-3-dynamic-analysis-dast-with-owasp-zap">Layer 3: Dynamic Analysis (DAST) with OWASP ZAP</a></li>
    <li><a href="#the-final-result-a-complete-devsecops-pipeline">The Final Result: A Complete DevSecOps Pipeline</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
  </details>
  



<script>
  var toc = document.querySelector(".toc");
  if (toc) {
    toc.addEventListener("click", function () {
      if (event.target.tagName !== "A") {
        event.preventDefault();
        if (this.open) {
          this.open = false;
          this.classList.remove("expanded");
        } else {
          this.open = true;
          this.classList.add("expanded");
        }
      }
    });
  }
</script>

        <div class="content e-content">
            <p>In modern software development, &ldquo;shifting left&rdquo; is more than just a buzzword; it&rsquo;s a crucial practice for building secure and reliable applications. By integrating security testing early and often in the development lifecycle, we can catch vulnerabilities before they reach production.</p>
<p>This guide will walk you through the practical steps of transforming a standard CI/CD pipeline into a robust DevSecOps pipeline. We&rsquo;ll start with a basic Jenkins setup for a Python application and incrementally add multiple layers of automated security scanning:</p>
<ul>
<li><strong>Static Application Security Testing (SAST)</strong> to analyze source code.</li>
<li><strong>Dynamic Application Security Testing (DAST)</strong> to test the running application.</li>
<li><strong>Software Composition Analysis (SCA)</strong> to find vulnerabilities in dependencies, including container image scanning.</li>
</ul>
<p>By the end, you&rsquo;ll have a clear blueprint for building security into your own CI/CD automation.</p>
<h2 id="the-starting-point-a-basic-cicd-pipeline" >
<div>
    <a href="#the-starting-point-a-basic-cicd-pipeline">
        #
    </a>
    The Starting Point: A Basic CI/CD Pipeline
</div>
</h2>
<p>Initially, my project had a standard <code>Jenkinsfile</code> that automated the core tasks of testing and deployment. The pipeline had four stages:</p>
<ol>
<li><strong>python-tests</strong>: Ran unit tests using <code>make test</code> inside a Python container.</li>
<li><strong>build-image</strong>: Built a Docker image from a Dockerfile.</li>
<li><strong>network-setup</strong>: Created a dedicated Docker network for the application to run on.</li>
<li><strong>app-deploy</strong>: Deployed the application as a container on the newly created network.</li>
</ol>
<p>This is a great start for continuous integration, but it has a major blind spot: it does nothing to check for security vulnerabilities.</p>
<p><img src="img-pre-pipeline.svg" alt="Basic pipeline"></p>
<h2 id="layer-1-static-analysis-sast--sca" >
<div>
    <a href="#layer-1-static-analysis-sast--sca">
        #
    </a>
    Layer 1: Static Analysis (SAST &amp; SCA)
</div>
</h2>
<p>The first step in securing our pipeline is to scan the source code before we even build an image. This involves two types of static analysis.</p>
<h3 id="sca-scanning-dependencies-with-osv-scanner" >
<div>
    <a href="#sca-scanning-dependencies-with-osv-scanner">
        ##
    </a>
    SCA: Scanning Dependencies with OSV-Scanner
</div>
</h3>
<p>Software Composition Analysis (SCA) tools scan your project&rsquo;s dependencies for known vulnerabilities. Since modern applications are built on a mountain of open-source libraries, this is a critical first step.</p>
<p>I added a new stage, <code>OSV-scan</code> , which uses Google&rsquo;s OSV-Scanner to check the Python packages in the <code>./src</code> directory and generate a JSON report.</p>
<p><strong>Code Snippet: OSV-Scanner Stage</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>stage<span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;OSV-scan&#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    steps <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        script <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            sh <span style="color:#a6d189">&#39;echo &#34;[*] OSV-scan scanning&#34;&#39;</span>
</span></span><span style="display:flex;"><span>            sh <span style="color:#a6d189">&#39;mkdir ${REPORTS_DIR}&#39;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#737994;font-style:italic">// Run the OSV-Scanner Docker image
</span></span></span><span style="display:flex;"><span><span style="color:#737994;font-style:italic"></span>            docker<span style="color:#99d1db;font-weight:bold">.</span><span style="color:#8caaee">image</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;ghcr.io/google/osv-scanner:latest&#39;</span><span style="color:#99d1db;font-weight:bold">).</span><span style="color:#8caaee">inside</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;--entrypoint &#34;&#34; &#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#737994;font-style:italic">// Run the OSV-Scanner command and generate the JSON report
</span></span></span><span style="display:flex;"><span><span style="color:#737994;font-style:italic"></span>                sh <span style="color:#a6d189">&#34;/osv-scanner --format json -r ./src &gt; ${REPORTS_DIR}/osv-results.json || true&#34;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">}</span>
</span></span></code></pre></div><p><em>Notice the <code>|| true</code> at the end of the command. This ensures that even if vulnerabilities are found, the pipeline doesn&rsquo;t stop. This allows us to collect reports from all scanners before deciding whether to fail the build.</em></p>
<h3 id="sast-scanning-code-with-bandit-and-semgrep" >
<div>
    <a href="#sast-scanning-code-with-bandit-and-semgrep">
        ##
    </a>
    SAST: Scanning Code with Bandit and Semgrep
</div>
</h3>
<p>Static Application Security Testing (SAST) tools analyze your custom source code for security flaws and bad practices. I used two different tools for broader coverage.</p>
<p><strong>Bandit</strong> is a tool designed specifically for finding common security issues in Python code. The <code>bandit-scan</code> stage installs bandit via pip and then runs it against the <code>./src</code> directory, generating an HTML report.</p>
<p><strong>Code Snippet: Bandit Scan Stage</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>stage<span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;bandit-scan&#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    steps <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        script <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>             sh <span style="color:#a6d189">&#39;echo &#34;[*] bandit scanning&#34;&#39;</span>
</span></span><span style="display:flex;"><span>             docker<span style="color:#99d1db;font-weight:bold">.</span><span style="color:#8caaee">image</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;python:3.9-slim-buster&#39;</span><span style="color:#99d1db;font-weight:bold">).</span><span style="color:#8caaee">inside</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39; -u 0 &#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                sh <span style="color:#a6d189">&#39;pip install bandit &#39;</span> 
</span></span><span style="display:flex;"><span>                sh <span style="color:#a6d189">&#34;bandit -r ./src -f html -o ${REPORTS_DIR}/bandit-report.html --severity-level low || true&#34;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">}</span>
</span></span></code></pre></div><p><strong>Semgrep</strong> is a powerful, polyglot static analysis tool that uses a vast registry of rules to find security issues, bugs, and anti-patterns. The <code>semgrep-scan</code> stage runs the official Semgrep image and tells it to automatically detect the project type and scan for relevant issues.</p>
<p><strong>Code Snippet: Semgrep Scan Stage</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>stage<span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;semgrep-scan&#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    steps <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        script <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>             sh <span style="color:#a6d189">&#39;echo &#34;[*] semgrep scanning&#34;&#39;</span>
</span></span><span style="display:flex;"><span>             docker<span style="color:#99d1db;font-weight:bold">.</span><span style="color:#8caaee">image</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;returntocorp/semgrep&#39;</span><span style="color:#99d1db;font-weight:bold">).</span><span style="color:#8caaee">inside</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                sh <span style="color:#a6d189">&#34;semgrep --config=auto . --output=${REPORTS_DIR}/semgrep-results.txt || true&#34;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="layer-2-container-image-scanning-with-trivy" >
<div>
    <a href="#layer-2-container-image-scanning-with-trivy">
        #
    </a>
    Layer 2: Container Image Scanning with Trivy
</div>
</h2>
<p>Scanning the source code is essential, but vulnerabilities can also exist in the operating system packages or other layers of the final Docker image. After the <code>build-image</code> stage, I added a <code>trivy-scan</code> stage to analyze the built container image.</p>
<p>This stage uses <code>aquasec/trivy</code> to scan the Docker image saved as a <code>.tar</code> file. It&rsquo;s configured to only fail on MEDIUM, HIGH, or CRITICAL severity vulnerabilities and outputs a JSON report, which is then copied to the reports directory.</p>
<p><strong>Code Snippet: Trivy Scan Stage</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>stage<span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;trivy-scan&#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    steps <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        script <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            sh <span style="color:#a6d189">&#39;echo &#34;[*] Trivy scanning&#34;&#39;</span>
</span></span><span style="display:flex;"><span>            docker<span style="color:#99d1db;font-weight:bold">.</span><span style="color:#8caaee">image</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;aquasec/trivy:latest&#39;</span><span style="color:#99d1db;font-weight:bold">).</span><span style="color:#8caaee">inside</span><span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;--entrypoint &#34;&#34; &#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                 sh <span style="color:#a6d189">&#39;trivy image --exit-code &#34;1&#34; --severity &#34;MEDIUM,HIGH,CRITICAL&#34; --format json --output report_trivy.json --input proj1.latest.tar || true&#39;</span> 
</span></span><span style="display:flex;"><span>                sh <span style="color:#a6d189">&#34;cp report_trivy.json ${REPORTS_DIR}/&#34;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="layer-3-dynamic-analysis-dast-with-owasp-zap" >
<div>
    <a href="#layer-3-dynamic-analysis-dast-with-owasp-zap">
        #
    </a>
    Layer 3: Dynamic Analysis (DAST) with OWASP ZAP
</div>
</h2>
<p>Static and image scanning are powerful, but they can&rsquo;t find vulnerabilities that only appear when the application is running. Dynamic Application Security Testing (DAST) addresses this by probing the live application.</p>
<p>To do this, the pipeline first deploys the application container (<code>proj1</code>) and then runs a second container with the OWASP Zed Attack Proxy (ZAP) scanner. Both containers are connected to the same dedicated Docker network (<code>ci-dast-network-${BUILD_NUMBER}</code>) , allowing ZAP to target the application using its container name.</p>
<p>The <code>zap-scan</code> stage starts ZAP in &ldquo;baseline&rdquo; mode, which performs a quick, passive scan against the application&rsquo;s URL. After the scan is complete, the generated HTML report is copied from the ZAP container to the Jenkins workspace for archival.</p>
<p><strong>Code Snippet: ZAP Scan Stage</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>stage<span style="color:#99d1db;font-weight:bold">(</span><span style="color:#a6d189">&#39;zap-scan&#39;</span><span style="color:#99d1db;font-weight:bold">)</span> <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    steps <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        script <span style="color:#99d1db;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            echo <span style="color:#a6d189">&#34;Starting OWASP ZAP DAST Scan...&#34;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#737994;font-style:italic">// ZAP will target the app container by its name on the shared Docker network
</span></span></span><span style="display:flex;"><span><span style="color:#737994;font-style:italic"></span>            <span style="color:#e78284">def</span> targetUrl <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#a6d189">&#34;http://${APP_CONTAINER_NAME}:${APP_INTERNAL_PORT}&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            sh <span style="color:#a6d189">&#34;docker run --name ${ZAP_CONTAINER_NAME} --network ${DOCKER_NETWORK_NAME} -p 8090:8090 -i zaproxy/zap-bare zap.sh -cmd -port 8090 -quickurl ${targetUrl} -quickout /zap/zap-report.html&#34;</span> 
</span></span><span style="display:flex;"><span>            sh <span style="color:#a6d189">&#34;docker cp ${ZAP_CONTAINER_NAME}:/zap/zap-report.html ${REPORTS_DIR}/${ZAP_HTML_REPORT}&#34;</span> 
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#99d1db;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="the-final-result-a-complete-devsecops-pipeline" >
<div>
    <a href="#the-final-result-a-complete-devsecops-pipeline">
        #
    </a>
    The Final Result: A Complete DevSecOps Pipeline
</div>
</h2>
<p>After adding all the security stages, the pipeline is far more robust. The final stage, <code>Archive Reports</code>, uses the <code>archiveArtifacts</code> step to save all the generated reports from our security tools.</p>
<p>Finally, the <code>post</code> block ensures that no matter what happens, the pipeline cleans up after itself by stopping and removing the application and ZAP containers and dismantling the Docker network.</p>
<p><img src="img-post-pipeline.svg" alt="Complete DevSecOps pipeline"></p>
<h2 id="conclusion" >
<div>
    <a href="#conclusion">
        #
    </a>
    Conclusion
</div>
</h2>
<p>By integrating a variety of open-source security tools directly into our Jenkinsfile, we have transformed a basic CI/CD pipeline into a powerful DevSecOps workflow. This multi-layered approach provides comprehensive, automated security feedback at every stage of the development process, from code commit to deployment. This not only makes our applications more secure but also empowers developers to find and fix issues faster, truly &ldquo;shifting security left.&rdquo;</p>

        </div>
    </article>

    
    
    

    








    
    
    
    

        </main>
        
            <footer class="common-footer noselect">
    
    

    <div class="common-footer-bottom">
        

        <div style="display: flex; align-items: center; gap:8px">
            
            ©  Pengsu,  2025
            
        </div>
        <div style="display:flex; align-items: center; gap:4px">
            
            

            
        </div>
        
            <div>
                Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/hugo-theme-anubis2/hugo-theme-anubis2">Anubis2</a>.<br>
            </div>
        
    </div>
</footer>

        
    </div>
</body>
</html>
